//
//  PokeCenterHealingFarewellDialogOverworldFlowState.cpp
//  ProjectRetro
//
//  Created by Alex Koukoulas on 12/09/2019.
//

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////

#include "PokeCenterHealingFarewellDialogOverworldFlowState.h"
#include "../components/CursorComponent.h"
#include "../components/GuiStateSingletonComponent.h"
#include "../utils/TextboxUtils.h"
#include "../../input/components/InputStateSingletonComponent.h"
#include "../../input/utils/InputUtils.h"
#include "../../overworld/components/OverworldFlowStateSingletonComponent.h"

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////

PokeCenterHealingFarewellDialogOverworldFlowState::PokeCenterHealingFarewellDialogOverworldFlowState(ecs::World& world)
    : BaseFlowState(world)
{   
    const auto mainChatbox = CreateChatbox(mWorld);
    QueueDialogForChatbox(mainChatbox, "We hope to see#you again!", mWorld);
}

void PokeCenterHealingFarewellDialogOverworldFlowState::VUpdate(const float)
{
    if (GetActiveTextboxEntityId(mWorld) == ecs::NULL_ENTITY_ID)
    {
        mWorld.GetSingletonComponent<OverworldFlowStateSingletonComponent>().mFlowHasJustFinished = true;
    }
}

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////


