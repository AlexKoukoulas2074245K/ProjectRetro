//
//  BaseOverworldFlowState.h
//  ProjectRetro
//
//  Created by Alex Koukoulas on 19/09/2019.
//

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////

#ifndef BaseOverworldFlowState_h
#define BaseOverworldFlowState_h

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////

#include "../utils/Logging.h"
#include "../../overworld/components/OverworldFlowStateSingletonComponent.h"

#include <memory>
#include <typeinfo>

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////

namespace ecs
{
    class World;
}


////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////

class BaseOverworldFlowState: public BaseFlowState
{
public:
    BaseOverworldFlowState(ecs::World& world)
        : BaseFlowState(world)
    {

    }

    virtual ~BaseOverworldFlowState() = default;
    
    virtual void VUpdate(const float dt) = 0;    

protected:

    void CompleteOverworldFlow()
    {
        mWorld.GetSingletonComponent<OverworldFlowStateSingletonComponent>().mFlowHasJustFinished = true;
    }
};

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////

#endif /* BaseOverworldFlowState_h */
