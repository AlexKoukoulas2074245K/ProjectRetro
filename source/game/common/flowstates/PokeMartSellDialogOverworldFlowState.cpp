//
//  PokeMartSellDialogOverworldFlowState.cpp
//  ProjectRetro
//
//  Created by Alex Koukoulas on 27/09/2019.
//

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////

#include "PokeMartSellDialogOverworldFlowState.h"
#include "../components/GuiStateSingletonComponent.h"
#include "../utils/TextboxUtils.h"

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////

const std::string PokeMartSellDialogOverworldFlowState::TEXTBOX_CLICK_SFX_NAME = "general/textbox_click";
const float PokeMartSellDialogOverworldFlowState::OVERLAID_CHATBOX_Z = -0.05f;

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////

PokeMartSellDialogOverworldFlowState::PokeMartSellDialogOverworldFlowState(ecs::World& world)
    : BaseFlowState(world)
{
    QueueDialogForChatbox(CreateChatbox(mWorld, glm::vec3(CHATBOX_POSITION.x, CHATBOX_POSITION.y, OVERLAID_CHATBOX_Z)), "What would you#like to sell?.+FREEZE", mWorld);
    
    auto& guiStateComponent = mWorld.GetSingletonComponent<GuiStateSingletonComponent>();
    guiStateComponent.mActiveChatboxDisplayState = ChatboxDisplayState::NORMAL;
}

void PokeMartSellDialogOverworldFlowState::VUpdate(const float)
{
    const auto& guiStateComponent = mWorld.GetSingletonComponent<GuiStateSingletonComponent>();
    if
    (
        guiStateComponent.mActiveTextboxesStack.size() == 3 &&
        guiStateComponent.mActiveChatboxDisplayState == ChatboxDisplayState::FROZEN
    )
    {
        
    }
}

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
